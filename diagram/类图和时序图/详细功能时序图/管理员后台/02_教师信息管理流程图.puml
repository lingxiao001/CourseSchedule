@startuml 教师信息管理流程图
title 管理员教师信息管理流程图

start

:管理员访问教师管理页面;
:验证管理员权限;

if (权限验证通过?) then (是)
    :查询教师列表;
    :显示教师信息列表;
    
    while (需要管理操作?) is (是)
        if (添加教师?) then (是)
            :显示添加教师表单;
            :填写教师信息;
            :前端表单验证;
            
            if (表单验证通过?) then (是)
                :检查用户名唯一性;
                
                if (用户名已存在?) then (是)
                    :显示用户名冲突错误;
                else (否)
                    :生成教师工号;
                    :开始数据库事务;
                    :创建用户记录;
                    :创建教师记录;
                    :提交事务;
                    :显示添加成功;
                    :刷新教师列表;
                endif
            else (否)
                :显示验证错误;
            endif
            
        elseif (修改教师信息?) then (是)
            :显示编辑教师表单;
            :修改教师信息;
            :前端表单验证;
            
            if (表单验证通过?) then (是)
                :查询教师记录;
                
                if (教师存在?) then (是)
                    :开始数据库事务;
                    :更新用户基本信息;
                    :更新教师详细信息;
                    :提交事务;
                    :显示修改成功;
                    :刷新教师列表;
                else (否)
                    :显示教师不存在错误;
                endif
            else (否)
                :显示验证错误;
            endif
            
        elseif (删除教师?) then (是)
            :显示删除确认对话框;
            :确认删除操作;
            :查询教师记录;
            
            if (教师存在?) then (是)
                :检查关联数据;
                
                if (存在关联数据?) then (是)
                    :显示关联数据冲突错误;
                else (否)
                    :开始数据库事务;
                    :删除教师记录;
                    :删除用户记录;
                    :提交事务;
                    :显示删除成功;
                    :刷新教师列表;
                endif
            else (否)
                :显示教师不存在错误;
            endif
        endif
    endwhile (否)
else (否)
    :显示权限不足错误;
    stop
endif

stop

@enduml 