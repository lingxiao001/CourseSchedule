@startuml 启动自动排课流程图
title 管理员启动自动排课流程图

start

:管理员访问智能排课页面;
:验证管理员权限;

if (权限验证通过?) then (是)
    :获取排课配置信息;
    :查询活跃课程列表;
    :查询可用教室列表;
    :查询待排课教学班;
    :检查排课前置条件;
    
    if (前置条件满足?) then (是)
        :显示排课配置页面;
        :管理员确认配置;
        :启动智能排课;
        :初始化排课环境;
        :清理旧排课数据;
        :调用排课算法;
        :加载约束条件;
        :执行智能算法;
        
        while (算法未收敛?) is (是)
            :生成候选解;
            :评估适应度;
            :选择、交叉、变异;
            
            if (达到收敛条件?) then (是)
                note right: 找到最优解
            else (否)
                note right: 继续迭代
            endif
        endwhile (否)
        
        :算法收敛;
        :获取排课结果;
        
        if (排课成功?) then (是)
            :开始数据库事务;
            :批量保存排课结果;
            :更新教学班状态;
            :提交事务;
            :生成排课报告;
            :显示排课成功页面;
            :显示排课结果表格;
        else (否)
            :显示排课失败信息;
        endif
    else (否)
        :显示前置条件错误;
        stop
    endif
else (否)
    :显示权限不足错误;
    stop
endif

stop

@enduml 